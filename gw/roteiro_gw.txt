Vamos condigurar a maquina "smb" nela vamosadiconar a resolução de nomes e o serviço de compartilhamento de arquivos SAMBA.

### 0 - Primeiro vamos mudar o nome da maquina para o nome escolhhido que está na tabela:

> gw.grupo4.turma914.ifalara.local

Com o comando:

```
$ sudo hostnamectl set-hostname gw.grupo4.turma914.ifalara.local
```

---

### 1 - Primeiro vamos configurar essa maquina como cliente do serviço DNS. Para isso vamos configurar as interfaces de rede e adicionar os IPs de DNS e o compo "search".

Vamos entrar no arquivo de configuração:

```
$ sudo nano /etc/netplan/00-installer-config.yaml
```

**RESULTADO**

```
# This is the network config written by 'subiquity'
network:
  ethernets:
    ens160:
      addresses: [10.9.14.103/22]
      gateway4: 10.9.14.1
      dhcp4: false
      nameservers:
        addresses:
          - 10.9.14.126                                 # IP ns1 (pedro)
          - 10.9.14.109                                 # IP ns2 (filipe)
        search: [grupo4.turma914.ifalara.local]
    ens192:
      addresses: [192.168.14.25/29]
  version: 2
```

![installer_confing](/gw/installer_confing.PNG)

Em seguida vamos aplicar as alterações.

Para isso usamos:

```
$ sudo netplan apply
```
---

### 2 - Agora vamos testar se está funcionando normalmente.

```
$ dig @10.9.14.126 ns2.grupo4.turma914.ifalara.local
```

Na linha "ANSWER SECTION:" tem que aparecer que foi resolvido, com o dominio e o IP.

Vamos usar o seguinte comando para verificar se a interface 160 está funcionando:

```
$ systemd-resolve --status ens160
```

Para finalizar vamos ver se o nosso serviço DNS revolve o DNS do google:

$ ping google.com

![dig-system_resolve-ping](/gw/dig-system_resolve-ping.PNG)

---


### 3 - 
